CONSOLE_NONE=0;CONSOLE_ERROR=1;CONSOLE_WARN=2;CONSOLE_INFO=3;CONSOLE_DEBUG=4;CONSOLE_LOG=5;CONSOLE_ALL=9;var P=function(a){for(var b=CONSOLE_NONE,c=a.console,d=/(iphone|ipad|ipod|android)/.test(navigator.userAgent.toLowerCase()),f={},h=[],j,e,l=["error","warn","info","debug","log"],n="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),
o=n.length;--o>=0;)(function(g){f[g]=function(){b!==0&&c&&c[g]&&c[g].apply(c,arguments)}})(n[o]);for(o=l.length;--o>=0;)(function(g,p){f[p]=function(){h.push([p].concat(Array.prototype.slice.call(arguments)));if(j&&(e||!c||!c.log))j.apply(a,arguments);if((b>0?b>g:l.length+b<=g)&&c)try{c[p]?d?c[p].call(c,arguments.join(" ")):c[p].apply(c,arguments):d?c.log.call(c,arguments.join(" ")):c.log.apply(c,arguments)}catch(B){c.log(Array.prototype.slice.call(arguments).join(" "))}}})(o,l[o]);f.getLogs=function(){return h};
f.setCallback=function(g,p){j=g;e=!!p};f.setLevel=function(g){b=Number(g)};return f}(window);window.debug=P;(function(a){function b(R,L){var S=/^\w+\:\/\//,ba;if(typeof R!=f)R="";if(typeof L!=f)L="";ba=(S.test(R)?"":L)+R;return(S.test(ba)?"":ba.charAt(0)===
"/"?hb:fa)+ba}function c(R,L){function S(t,J){if(t[l]&&t[l]!==B&&t[l]!=="loaded"||J[A])return E;t[r]=t[s]=z;return v}function ba(t,J,M){if((M=!!M)||S(t,J)){J[A]=v;for(var Q in la)if(la[y](Q)&&!la[Q][A])return;$b=v;F()}}function ma(t){if(I.call(t[o])===m){t[o]();t[o]=z}}function Hb(t,J){if(S(t,J)){J[n]=v;V(function(){w[J[C]].removeChild(t);ma(J)},0)}}function ib(t,J){if(t[l]===4){t[s]=za;J[n]=v;V(function(){ma(J)},0)}}function Ib(t,J,M,Q,ra,Aa){var ub=t[C];V(function(){if("item"in w[ub]){if(!w[ub][0]){V(arguments.callee,
25);return}w[ub]=w[ub][0]}var Na=D.createElement(e);if(typeof M==f)Na.type=M;if(typeof Q==f)Na.charset=Q;if(I.call(ra)===m){Na[r]=Na[s]=function(){ra(Na,t)};Na.src=J;if(O)Na.async=E}w[ub].insertBefore(Na,ub===h?w[ub].firstChild:z);if(typeof Aa==f){Na.text=Aa;ba(Na,t,v)}},0)}function Jb(t,J,M,Q){H[t[g]]=v;Ib(t,J,M,Q,ba)}function vb(t,J,M,Q){var ra=arguments;if(ia&&t[n]==z){t[n]=E;Ib(t,J,i,Q,Hb)}else if(!ia&&t[n]!=z&&!t[n])t[o]=function(){vb.apply(z,ra)};else ia||Jb.apply(z,ra)}function Kb(t,J,M,Q){var ra=
arguments,Aa;if(ia&&t[n]==z){t[n]=E;Aa=t.xhr=X?new X("Microsoft.XMLHTTP"):new a.XMLHttpRequest;Aa[s]=function(){ib(Aa,t)};Aa.open("GET",J);Aa.send("")}else if(!ia&&t[n]!=z&&!t[n])t[o]=function(){Kb.apply(z,ra)};else if(!ia){H[t[g]]=v;Ib(t,J,M,Q,z,t.xhr.responseText);t.xhr=z}}function Lb(t){if(t.allowDup==z)t.allowDup=L.dupe;var J=t.type,M=t.charset,Q=t.allowDup;t=b(t.src,sa);var ra=b(t).indexOf(hb)===0;if(typeof M!=f)M=z;Q=!!Q;if(Q=!Q){if(!(Q=H[t]!=z)){if(!(Q=ia&&la[t]))a:{for(var Aa=-1;Q=Mb[++Aa];)if(typeof Q.src==
f&&t===b(Q.src)&&Q.type!==i){Q=v;break a}Q=E}Q=Q}Q=Q}if(Q)la[t]!=z&&la[t][n]&&!la[t][A]&&ra&&ba(z,la[t],v);else{if(la[t]==z)la[t]={};Q=la[t];if(Q[C]==z)Q[C]=jb;Q[A]=E;Q[g]=t;Z=v;if(!wb&&na&&ra)Kb(Q,t,J,M);else!wb&&ac?vb(Q,t,J,M):Jb(Q,t,J,M)}}function kb(t){R&&!wb&&x.push(t);if(!R||lb)t()}function oa(t){var J=[],M;for(M=-1;++M<t.length;)if(I.call(t[M])===k)J=J.concat(oa(t[M]));else J[J.length]=t[M];return J}R=!!R;if(L==z)L=Oa;var $b=E,lb=R&&L[p],ac=lb&&L.cache,wb=lb&&L.order,na=lb&&L.xhr,q=L[G],jb=
L.which,sa=L.base,F=za,Z=E,xb,ia=v,la={},x=[],N=z;lb=ac||na||wb;xb={script:function(){K(N);var t=oa(arguments),J=xb,M;if(q)for(M=-1;++M<t.length;){if(M===0)kb(function(){Lb(typeof t[0]==f?{src:t[0]}:t[0])});else J=J.script(t[M]);J=J.wait()}else kb(function(){for(M=-1;++M<t.length;)Lb(typeof t[M]==f?{src:t[M]}:t[M])});N=V(function(){ia=E},5);return J},wait:function(t){K(N);ia=E;I.call(t)===m||(t=za);var J=c(v,L),M=J.trigger,Q=function(){try{t()}catch(Aa){}M()};delete J.trigger;var ra=function(){if(Z&&
!$b)F=Q;else Q()};R&&!Z?x.push(ra):kb(ra);return J}};if(R)xb.trigger=function(){for(var t,J=-1;t=x[++J];)t();x=[]};return xb}function d(R){var L,S={},ba={UseCachePreload:"cache",UseLocalXHR:"xhr",UsePreloading:p,AlwaysPreserveOrder:G,AllowDuplicates:"dupe"},ma={AppendTo:C,BasePath:"base"};for(L in ba)ma[L]=ba[L];S.order=!!Oa.order;for(L in ma)if(ma[y](L)&&Oa[ma[L]]!=z)S[ma[L]]=R[L]!=z?R[L]:Oa[ma[L]];for(L in ba)if(ba[y](L))S[ba[L]]=!!S[ba[L]];if(!S[p])S.cache=S.order=S.xhr=E;S.which=S.which===h||
S.which===j?S.which:h;return S}var f="string",h="head",j="body",e="script",l="readyState",n="preloaddone",o="loadtrigger",g="srcuri",p="preload",B="complete",A="done",C="which",G="preserve",s="onreadystatechange",r="onload",y="hasOwnProperty",i="script/cache",m="[object Function]",k="[object Array]",z=null,v=true,E=false,D=a.document,X=a.ActiveXObject,V=a.setTimeout,K=a.clearTimeout,I=Object.prototype.toString,za=function(){},w={},H={},fa=/^[^?#]*\//.exec(a.location.href)[0],hb=/^\w+\:\/\/\/?[^\/]+/.exec(fa)[0],
Mb=D.getElementsByTagName(e),mb=a.opera&&I.call(a.opera)=="[object Opera]",ca="MozAppearance"in D.documentElement.style,O=D.createElement(e).async===true,Oa={cache:!(ca||mb),order:ca||mb||O,xhr:v,dupe:v,base:"",which:h};Oa[G]=E;Oa[p]=v;w[h]=D.head||D.getElementsByTagName(h);w[j]=D.getElementsByTagName(j);a.$LAB={setGlobalDefaults:function(R){Oa=d(R)},setOptions:function(R){return c(E,d(R))},script:function(){return c().script.apply(z,arguments)},wait:function(){return c().wait.apply(z,arguments)}};
(function(R,L,S){if(D[l]==z&&D[R]){D[l]="loading";D[R](L,S=function(){D.removeEventListener(L,S,E);D[l]=B},E)}})("addEventListener","DOMContentLoaded")})(window);(function(){var a=false,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.MingClass=function(){};MingClass.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var f=this.prototype;a=true;var h=new this;a=false;for(var j in c)h[j]=typeof c[j]=="function"&&typeof f[j]=="function"&&b.test(c[j])?function(e,l){return function(){var n=this._super;this._super=f[e];var o=l.apply(this,arguments);this._super=n;return o}}(j,c[j]):c[j];d.prototype=h;d.constructor=
d;d.extend=arguments.callee;return d}})();XHR=function(){function a(c){try{return JSON.parse(c)}catch(d){return c}}
function b(c,d,f,h,j,e){var l=/^(\w+:)?\/\/([^\/?#]+)/.exec(d);l=l&&(l[1]&&l[1].toLowerCase()!==location.protocol||l[2].toLowerCase()!==location.host);var n=window.XDomainRequest&&l?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(e==="script"&&c==="GET"&&l){var o=document.getElementsByTagName("head")[0]||document.documentElement,g=document.createElement("script"),p=false;g.src=d;g.onload=g.onreadystatechange=function(){if(!p&&(!this.readyState||
this.readyState==="loaded"||this.readyState==="complete")){p=true;g.onload=g.onreadystatechange=null;o&&g.parentNode&&o.removeChild(g)}};o.insertBefore(g,o.firstChild);return true}n.open(c,d,!!h);if(n.setRequestHeader){n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l||n.setRequestHeader("X-Requested-With","XMLHttpRequest")}if(j)n.withCredentials=true;if(h)n.onreadystatechange=function(){n.readyState===4&&h.call(n,a(n.responseText),n.status)};n.send(f);return h?true:a(n.responseText)}
this.get=function(c,d){return b("GET",c,null,d)};this.getWithCredentials=function(c,d){return b("GET",c,null,d,true)};this.getJson=function(c,d){return b("GET",c,null,null,d,"script")};this.post=function(c,d,f){return b("POST",c,d,f)};this.postWithCredentials=function(c,d,f){return b("POST",c,d,f,true)};this.request=b};window.XHR=XHR;ICanHas=function(){function a(e){var l=c.createElement("style"),n=c.createElement("div");l.textContent=e+"{#icanhas{height:3px}}";f.appendChild(l);n.id="icanhas";d.appendChild(n);e=n.offsetHeight===3;l.parentNode.removeChild(l);n.parentNode.removeChild(n);return!!e}function b(e){if(!h.canPlayType)return false;if(e.indexOf("video/mp4")>-1&&navigator.userAgent.toLowerCase().indexOf("android")>
-1)return true;return!!h.canPlayType(e)}var c=document,d=c.documentElement,f=c.head||c.getElementsByTagName("head")[0],h=c.createElement("video"),j=["-webkit-","-moz-","-o-","-ms-","-khtml-"];return{touch:"ontouchstart"in window||a("@media ("+j.join("touch-enabled),(")+"modernizr)"),video:!!h.canPlayType,codecs:function(){var e=[];b('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')&&e.push("h264");b('video/webm; codecs="vp8,vorbis"')&&e.push("vp8");b('video/x-flv; codecs="vp6"')&&e.push("vp6");return e}(),
cors:window.XDomainRequest||window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}}();FlashDetect=function(){var a=navigator,b=false,c=0,d=0,f=0,h=null,j=null;if(a.plugins&&a.plugins.length){if((a=a.plugins["Shockwave Flash"])&&a.description){h=a.description;b=true}}else if(a.mimeTypes&&a.mimeTypes.length){if((a=a.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin)b=true}else try{h=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version");
b=true}catch(e){}if(h){j=h.replace(/\D+/g,".").replace(/^\./,"");a=j.split(".");c=parseInt(a[0],10);d=parseInt(a[1],10);f=parseInt(a[2],10)}return{installed:b,raw:h,version:j,major:c,minor:d,revision:f,versionAtLeast:function(l,n,o){l=l||10;n=n||0;o=o||0;var g=[c,d,f],p=arguments,B=Math.min(g.length,p.length),A;for(A=0;A<B;A++)if(g[A]>=p[A]){if(!(A+1<B&&g[A]===p[A]))return true}else return false}}}();$m={};(function(a){function b(i,m,k){if(a.type(k)!=="array"||k===l)k=[k];for(var z=0,v=k.length;z<v;z++)k[z][i]||(k[z][i]=m);a[i]=function(){var E=Array.prototype.slice.call(arguments),D=E.shift();return m.apply(D,E)}}function c(i,m,k,z){k[i]=m;z.push(i);z.length>1E3&&delete k[z.shift()];return m}function d(i,
m){if(i in m)return m[i];return false}function f(){var i=this.valueOf();return i<0?~~i-1:~~i}function h(i,m){return this<m?i>this?i:this:m}function j(i,m){var k=this.valueOf()+"";return Array(i-k.length+1).join(m||"0")+k}if(!window.Element)window.Element={};for(var e=document,l=Array.prototype,n=!window.HTMLElement?{}:HTMLElement.prototype,o=!window.NodeList?{}:NodeList.prototype,g=Number.prototype,p=String.prototype,B=window,A={},C=[],G="Boolean Number String Function Array Date RegExp Object".split(" "),
s=[],r=0,y=G.length;r<y;r++)s["[object "+G[r]+"]"]=G[r].toLowerCase();a.type=function(i){return i==null?String(i):s[Object.prototype.toString.call(i)]||"object"};a.isArray=function(i){return a.type(i)==="array"};a.emptyFunction=function(){};a.clone=function(i){var m=a.isArray(i)?[]:{};for(r in i)if(r!=="clone")m[r]=i[r]&&a.type(i[r])==="object"?a.clone(i[r]):i[r];return m};a.addEventListener=function(i,m,k){window.addEventListener?i.addEventListener(m,k,false):i.attachEvent("on"+m,k)};a.removeEventListener=
function(i,m,k){window.removeEventListener?i.removeEventListener(m,k,false):i.detachEvent("on"+m,k)};a.findKey=function(i,m){for(var k in m)if(m.hasOwnProperty(k)&&m[k]===i)return k;return false};a.fibonacci=function(i){var m=Math.sqrt(5);return(1/m*Math.pow((1+m)/2,i)-1/m*Math.pow((1-m)/2,i)).round()};b("abs",function(){var i=this.valueOf();return i<0?-i:i},g);b("addClass",function(i){if(this.length&&this.forEach)this.forEach(function(m){a.addClass(m,i)});else if(!a.hasClass(this,i))this.className=
this.className.split(" ").concat(i).unique().join(" ").trim();return this},[n,o]);b("attr",function(i,m){if(a.type(i)==="object"){for(prop in i)this.setAttribute(prop,i[prop]);return this}if(m===void 0)return this.getAttribute(i);m===null||m===""?this.removeAttribute(i):this.setAttribute(i,m);return this},n);b("ceil",function(){return f.call(this.valueOf()+1)},g);b("clamp",function(i,m,k){function z(){if(checkCount>200)return false;if(v.innerText!=i||v[property]==0){checkCount++;setTimeout(z,1)}else a:if(!(v[property]<=
k)){for(;v[property]>k;){v.innerText=v.innerText.substr(0,v.innerText.length-1);if(v.innerText==""||v.innerText.length==0)break a}v.innerText=v.innerText.substr(0,v.innerText.length-3)+"..."}}var v=this;v.innerHTML=i;property=m=="height"?"clientHeight":"clientWidth";checkCount=0;z();return v},n);b("clear",function(){this.childNodes.forEach(function(i){i.remove&&i.remove()});return this},n);b("computeStyle",function(i){if(!B.getComputedStyle)B.getComputedStyle=function(m){this.el=m;this.getPropertyValue=
function(k){var z=/(\-([a-z]){1})/g;if(k=="float")k="styleFloat";if(z.test(k))k=k.replace(z,function(v,E,D){return D.toUpperCase()});return m.currentStyle&&m.currentStyle[k]?m.currentStyle[k]:null};return this};return B.getComputedStyle(this,null).getPropertyValue(i)},n);b("contains",function(i){return this.indexOf(i)!==-1},[l,p]);b("css",function(i,m){if(a.type(i)==="object"){for(prop in i)this.style[prop]=i[prop];return this}if(m===void 0)return this.style[i];this.style[i]=m===null||m===""?"":m;
return this},n);b("floor",f,g);b("forEach",function(i,m){if(a.type(i)==="function")for(var k=this.length>>>0,z=0;z<k;z++)z in this&&i.call(m,this[z],z,this)},[l,o]);b("getElementsByClassName",function(i){var m=[],k=0,z,v,E;if(document.evaluate){z=".//*[contains(concat(' ', @class, ' '), ' "+i+" ')]";for(v=document.evaluate(z,this,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);E=v.snapshotItem(k++);)m[m.length]=E}else{z=RegExp("(^|\\s)"+i+"(\\s|$)");v=this.getElementsByTagName("*");k=0;for(var D=
v.length;k<D;k++){E=v[k];if(E.className===i||z.test(E.className))m[m.length]=E}}return m},e);b("hasAncestor",function(i){if(i===this)return true;for(var m=this.parentNode;m;){if(m===i)return true;m=m.parentNode}return false},n);b("hasClass",function(i){if(i.splice){for(var m=this.className.split(" "),k=0,z=m.length;k<z;k++)if(i.contains(m[k]))return true;return false}return RegExp("(?:^|\\s+)"+i+"(?:\\s+|$)").test(this.className)},n);b("hex2rgb",function(){if(cached=d(this,A))return cached;var i=
parseInt(this.replace("#",""),16);i=[(i&16711680)>>16,(i&65280)>>8,i&255];return c(this,"rgb("+i.join(",")+")",A,C)},p);b("html",function(i){if(i===void 0)return this.innerHTML;this.innerHTML=i;return this},n);b("indexOf",function(i){for(var m=0,k=this.length;m<k;m++)if(this[m]==i)return m;return-1},l);b("innerHeight",function(){for(var i=0,m,k=0,z=this.childNodes.length;k<z;k++){m=this.childNodes[k];if(m.style)i+=m.clientHeight+(a.toInt(a.computeStyle(m,"margin-top"),10)||0)+(a.toInt(a.computeStyle(m,
"margin-bottom",10))||0)}return i},n);b("limit",h,g);b("map",function(i,m){for(var k=this.length>>>0,z=Array(k),v=0;v<k;v++)if(v in this)z[v]=i.call(m,this[v],v,this);return z},l);b("max",function(){return Math.max.apply(Math,this)},l);b("min",function(){return Math.min.apply(Math,this)},l);b("pad",j,[p,g]);b("position",function(){var i=0,m=0,k=this;if(k.offsetParent){do{i+=k.offsetLeft;m+=k.offsetTop}while(k=k.offsetParent)}return{x:i,y:m}},n);b("prependChild",function(i){return this.insertBefore(i,
this.firstChild)},n);b("q",function(i){return this.querySelector(i)},[e,n]);b("qa",function(i){return this.querySelectorAll(i)},[e,n]);b("remove",function(){if(this.length)this.forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)});else this.parentNode&&this.parentNode.removeChild(this)},[n,o]);b("removeClass",function(i){if(this.length&&this.forEach)this.forEach(function(m){a.removeClass(m,i)});else if(a.hasClass(this,i))this.className=this.className.replace(RegExp("(?:^|\\s+)"+i+"(?:\\s+|$)",
"g")," ").trim();return this},[n,o]);b("rgb2hex",function(){if(cached=d(this,A))return cached;var i=this.match(/\d{1,3}/g).slice(0,3);i=i.map(function(m){return j.call(h.call(parseInt(m,10),0,255).toString(16),2)});return c(this,i.join(""),A,C)},p);b("round",function(){return f.call(this.valueOf()+0.5)},g);b("toInt",function(i){return parseInt(this.valueOf?this.valueOf():this,i||10)},[p,g]);b("toFloat",function(i){return parseFloat(this.valueOf(),i||10)},[p,g]);b("trim",function(){return this.replace(/^\s\s*/,
"").replace(/\s\s*$/,"")},p);b("ucfirst",function(){return this.charAt(0).toUpperCase()+this.slice(1)},p);b("unique",function(){var i=[],m=0,k=this.length;a:for(;m<k;m++){for(var z=0,v=i.length;z<v;z++)if(i[z]===this[m])continue a;i[i.length]=this[m]}return i},l);b("wrap",function(i,m){var k=this,z=a.addClass(document.createElement(i),m||"");k.length||(k=Array(this));k.forEach(function(v,E){E===0&&v.parentNode.replaceChild(z,v);z.appendChild(v)});return z},[n,o])})($m);EventManager=
function(a,b){function c(j){if(!d.contains(j)&&b)throw"Not a valid event type: "+j;if(!f[j]){var e=document.createElement("a");e.id="Event:"+j;h.appendChild(e);f[j]=e}return f[j]}var d=a||[],f={},h=document.createElement("div");h.id="events"+(new Date).getTime();document.body.appendChild(h);this.bind=function(j,e){var l=c(j);window.addEventListener?l.addEventListener("click",e,false):l.attachEvent("onclick",e);return this};this.unbind=function(j,e){var l=c(j);window.removeEventListener?l.removeEventListener("click",
e,false):l.detachEvent("onclick",e);return this};this.fire=function(j,e){var l,n=c(j);b&&b.debug("firing",j,e);if(document.createEvent){l=document.createEvent("HTMLEvents");l.initEvent("click",false,true);l.name=j;l.data=e;return n.dispatchEvent(l)}else{l=document.createEventObject();l.name=j;l.data=e;return n.fireEvent("onclick",l)}}};window.EventManager=EventManager;var yb=
"ming",zb="moogaloop",lc="noplayer",mc="nomobile",Xa="mobile",nc="touch",kc="desktop",Gc="html",Fc="flash",Y="noplayer",ka="hd",cb="sd",La="mobile",Hc=[ka,cb,La],cd="pl_volume",Cc="hd_preference";Y=/WebKit/.test(navigator.userAgent);var Db=/Gecko/.test(navigator.userAgent);Db=/Trident/.test(navigator.userAgent);Db=/Presto/.test(navigator.userAgent);Db=navigator.userAgent.toLowerCase().indexOf("android")>-1;var Pb=Y?"webkitTransitionEnd":"transitionend",Cb=8,dd=250,Dc=140,Ec=200,ed=265;Y=200;var hc=
1.5,Ic=2E3,Qb=7,ta=1,Da=2,$a=3,aa=4,qa=5,ab=6,sc=7,Ra=8,Ca=9,Jc=10,Kc=11,tc=12,uc=13,Eb=14,Fb=15,Sa=16,vc=17,Wb=18,Xb=19,Gb=20,wc=21,Yb=22,Zb=23,W=24,ga=25,Ba=26,pa=27,da=28,sb=29,xc=30,Fa=31,Ga=32,Ha=33,Ia=34,qb="loadProgress",rb="playProgress",pb="play",ob="pause",nb="finish",bb="seek",Ma="ready",ad="error",gc="addEventListener()",oc="removeEventListener()",eb="play()",db="pause()",fb="seekTo()",gb="unload()",Ja="setColor()",Ta="setLoop()",Ua="setVolume()",va="getDuration()",ua="getCurrentTime()",
Ka="getVolume()",pc="getColor()",tb="getLoop()",qc="getVideoUrl()",rc="getVideoEmbedCode()",Pa="getVideoWidth()",Qa="getVideoHeight()",ya="paused()",xa="a",Vb="aa",Nb="an",ec="ap",T="bf",U="ag",jc="ba",Ub="ac",Xc="c",Yc="j",Zc="k",$c="l";Y="af";Y=Y="b";Y="g";var Lc="au",fd="p";Y="ak";Y="ca";var Ab="w",Bb="v",Ya="z",Va="j",Ob="u",Ea="i",dc="bc",fc="ay",Tc="cg",Uc="y",cc="bq",Vc="aq",Za="bp",bc="cs",gd="av",ja="c",yc="h",zc="al";Y="m";var Mc="l",hd="cc",id="aw",Rb="aj";Y="ct";var jd="ae";Y="br";var Ac=
"q",kd="ar",wa="e",ha="d",Sb="ah",Tb="by",ic="bl",Nc="bd",ld="o",md="videos",nd="as",Wa="r",od="cb",Oc="be",ea="k",Bc="n",pd="bi",Pc="ai",qd="x";Y="cy";var Qc="bz",Rc="bh",rd="bs",Sc="bm";Y="d";var Wc="bk",bd="bu";if(window.$){$=$;$$=$$}var u=MingClass.extend({init:function(a,b,c){function d(){if(!ICanHas.video)return false;if(n.ie)return false;if(n.safari&&n.safari<4)return false;for(var g in h.config.video.files)if($m.contains(ICanHas.codecs,g))return true;return false}function f(){h.api=new u.API(h.config);playerElement=a.getElementsByTagName("div")[0];$m.addClass(playerElement,h.playerType===zb?Wc:xa);h.player=new (h.playerType===zb?u.Moogaloop:h.playerType===lc||h.playerType===
mc?u.NoPlayer:u.Ming)(playerElement,b.options[h.playerType===mc?lc:h.playerType],h);c&&c.call(h)}var h=this,j=b.assets,e,l;l=navigator;e=l.userAgent.toLowerCase();l=l.platform.toLowerCase();var n={firefox:/firefox/.test(e)?e.replace(/^.*firefox\/(\d+\.\d+\.\d+).*$/,"$1"):false,webkit:/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,safari:/safari/.test(e)?parseFloat(e.replace(/^.*version\/([0-9])+.*$/,"$1")):false,ie:/msie/.test(e),opera:/presto/.test(e),win:l?/win/.test(l):
/win/.test(e),mac:/mac/.test(l||e)?parseFloat(e.replace(/^.* ((\d+)(_|\.)?(\d+)?).*$/,"$2.$4")):false,linux:l?/linux/.test(l):/linux/.test(e),android:/android/.test(e)?parseFloat(e.replace(/^.* android (\d+)\.(\d+).*$/,"$1.$2")):false};h.element=a;h.config=b.config;h.playerType=null;h.playerMode=null;h.playableFiles=null;h.thumbs=b.thumbs;h.api=false;h.ua=n;h.uniqueId=b.uniqueId;u.cookieDomain=h.config.request.cookie_domain;h.playerMode=function(){if(h.playerMode)return h.playerMode;var g=kc;if(Math.min(screen.width,
screen.height)<=480||u.getCookie("test_mobiloop")=="1"||n.android)g=Xa;else if(screen.width<=768)g=nc;return g}();h.playableFiles=function(){var g=h.config.video,p=g.files,B={hd:false,sd:false,mobile:false};for(codec in p)if(ICanHas.codecs.contains(codec)){if(h.playerMode===Xa){if($m.contains(p[codec],La))B.mobile=codec;break}for(var A=0,C=p[codec].length;A<C;A++){var G=p[codec][A];if(G===ka&&!B.hd)B.hd=codec;else if(G===cb&&!B.sd)B.sd=codec;else if(G===La&&!B.mobile)B.mobile=codec}}if(!h.config.security.hd_embed)B.hd=
false;if(h.playerMode===nc)if(g.height*g.width>921600){P.info("Can't play HD version on iPad: too big");B.hd=false;h.config.video.hd=false}P.info("Playable files:",B);return B}();h.playerType=function(g){var p=lc;switch(g){case Fc:p=FlashDetect.installed&&FlashDetect.major>=10?zb:d()?yb:p;break;case Gc:p=h.playerMode!==Xa&&!h.playableFiles.hd&&!h.playableFiles.sd?FlashDetect.installed&&FlashDetect.major>=10?zb:h.playableFiles.mobile?yb:p:d()?yb:FlashDetect.installed&&FlashDetect.major>=10?zb:p;break}if(h.playerMode===
Xa&&!h.playableFiles.mobile)p=mc;return p}(function(){var g=h.config.user.preferences.html;return g===1||n.safari>=5&&(n.mac>=10.6||n.win)&&g!==0?Gc:Fc}());l=h.playerType===zb?j.moogaloop:j.ming[h.playerMode];P.info("Player Type:",h.playerType);P.info("Player Mode:",h.playerMode,Math.min(screen.width,screen.height));P.info("Screen Size:",screen.width,"x",screen.height);h.setThumb();e=$LAB.setOptions({AlwaysPreserveOrder:true,BasePath:j.path});j.cache||(l=$m.map(l,function(g){return g+(g.indexOf("?")>
-1?"&":"?")+(new Date).getTime()}));try{e.script(l).wait(f)}catch(o){}P.info("Reticulating splines...")},getConfig:function(){return this.config},setConfig:function(a){this.config=a},setThumb:function(){var a=this.element.getElementsByTagName("div")[0].getElementsByTagName("div")[0],b=a.getAttribute("data-thumb"),c=this.thumbs[640];for(var d in this.thumbs)if(this.thumbs.hasOwnProperty(d))if(this.element.clientWidth>=d-100||this.element.clientWidth>=940){c=this.thumbs[d];break}this.config.video.thumbnail=
c;if(b!==c&&this.playerType===yb){a.style.backgroundImage="url("+c+")";a.setAttribute("data-thumb",c)}}});u.setCookie=function(a,b,c,d){var f=document.getElementById(Xc),h="";c=c||87600;d=d||u.cookieDomain;if(f){document.getElementById(Yc).value=a;document.getElementById(Zc).value=b;document.getElementById($c).value=c;window.addEventListener("message",function(j){j.data=="refresh"&&u.xhrRefresh()});f.submit()}else{if(c){f=new Date;f.setTime(f.getTime()+c*60*60*1E3);h="; expires="+f.toGMTString()}d=
"; domain="+d;document.cookie=a+"="+b+h+"; path=/"+d}};u.getCookie=function(a){var b=document.cookie;a=a+"=";var c;if(b&&b!==""){b=document.cookie.split(";");for(var d=0,f=b.length;d<f;d++){c=b[d].trim();if(c.indexOf(a)===0)return unescape(c.substr(a.length))}}return null};u.eatCookie=function(a){document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"};u.xhrRefresh=function(){var a;(new XHR).get(document.location.href,function(b){a=document.getElementsByTagName("body")[0];a.innerHTML=b;$m.forEach(a.getElementsByTagName("script"),
function(c){c.innerHTML&&(new Function(c.innerHTML)).call(window)})})};u.checkRatio=function(a,b,c){if(!b)return false;c=c.video.width/c.video.height;var d=a.clientWidth/a.clientHeight;if(Math.abs(c-d)<0.02){$m.removeClass(a,Ab);$m.removeClass(a,Bb)}else if(d>c){$m.removeClass(a,Bb);$m.addClass(a,Ab)}else{$m.removeClass(a,Ab);$m.addClass(a,Bb)}$m.removeClass(b,T)};if(!u.init)u.init={queue:[],loaderAdded:false,loader:function(){u.init.queue.length>0&&u.init.queue.shift()()}};window.Player=u;
u.Moogaloop=MingClass.extend({init:function(a,b,c){function d(){var w=[[{text:"Switch to HTML Player",action:function(){u.setCookie("html_player",1);setTimeout(function(){window.location.reload()},100)}}],[{text:"Like",action:function(){}},{text:"Later",action:function(){}},{text:"Share",action:function(){}},{text:"Embed",action:function(){}}],[{text:"HD",type:"toggle",active:true,action:function(){}},{text:"Loop",type:"toggle",active:false,action:function(){}},{text:"Quick start",type:"toggle",active:false}],
[{text:"Fullscreen",action:function(){}}],[{text:function(){return"Vimeo Moogal"+(K?"over":"oop")+" Flash Player, v"+b.versions[K?"cover":"player"]},type:"info"},{text:"Vimeo Player v"+b.versions.js,type:"info"},{text:'<span style="margin-top: 0.5em;">To use your system\'s right-click <br/>menu, hold down the '+(c.ua.mac?"Command":"Control")+" key.</span>",type:"info"}]];r.embed.on_site||w[0].unshift([{text:"Watch on Vimeo",type:"link",url:r.video.url}]);return w}function f(w){if(r.user.status.mod)menu=
new u.ContextMenu(w,d(),c.ua)}function h(w,H,fa){var hb={server:r.request.vimeo_url,player_server:r.request.player_url,cdn_server:r.request.cdn_url,embed_location:r.request.referrer,force_embed:b.force_embed,force_info:b.force_info,moogaloop_type:za,js_api:1,js_getConfig:b.ref_id+".getConfig",js_setConfig:b.ref_id+".setConfig",clip_id:r.video.id,fullscreen:1},Mb={id:H.id,name:H.id,styleclass:U};if(y.ie)w+=(w.indexOf("?")>0?"&":"?")+"time="+(new Date).getTime();for(attr in fa)if(fa.hasOwnProperty(attr))hb[attr]=
fa[attr];swfobject.embedSWF(w,H.id,"100%","100%","10.0.0","/assets/flash/expressInstall.swf",hb,{allowscriptaccess:"always",allowfullscreen:"true",scalemode:"noscale",quality:"high",wmode:"opaque",bgcolor:"#000000"},Mb,function(mb){if(y.safari&&y.win){P.debug("Removing invisible from swfobject");$m.removeClass(mb.ref,U)}y.android&&y.android<2.2&&$m.removeClass(mb.ref,U)})}function j(){var w="cover"+c.uniqueId;X=document.getElementById(w);if(!X){X=document.createElement("div");X.setAttribute("id",
w);$m.addClass(X,bd);a.appendChild(X)}h(z,X,{js_onLoad:b.ref_id+".player.loverLoaded",js_onThumbLoaded:b.ref_id+".player.loverThumbLoaded",js_setupMoog:b.ref_id+".player.loverInitiated"});r.embed.autoplay=1}function e(){var w="player"+c.uniqueId;V=document.getElementById(w);if(!V){V=document.createElement("div");V.setAttribute("id",w);a.appendChild(V)}h(v,V,{js_onLoad:b.ref_id+".player.moogaloopLoaded",js_onThumbLoaded:b.ref_id+".player.moogaloopThumbLoaded"})}function l(){I&&I.api_pause()}function n(){if(K)s.loverInitiated();
else I&&I.api_play()}function o(w){I&&I.api_seekTo(w.data)}function g(){I&&I.api_unload()}function p(w){r.embed.color=w.data;I&&I.api_changeColor(w.data)}function B(w){r.embed.loop=!!w.data;I&&I.api_setLoop(r.embed.loop)}function A(w){if(I){w=w.data;if(r.embed.api.version<2)w*=100;I.api_setVolume(w)}}function C(w){var H=false;switch(w.name){case ua:H=I?I.api_getCurrentTime().toFixed(3):0;break;case va:H=I?I.api_getDuration().toFixed(3):r.video.duration;break;case Ka:H=I?I.api_getVolume().toFixed(3):
r.user.preferences.volume/100;break;case ya:H=I?!!I.api_paused():true;break}m.sendBack(w.name,H)}function G(w){var H=r.embed.api.version<2?w.data:"on"+w.data.ucfirst();if(I){I.api_addEventListener(w.data,b.ref_id+".player."+H);P.debug("Adding listener",w.data,b.ref_id+".player."+H)}else{P.debug("Queuing listener",w.data,b.ref_id+".player."+H);E.push(["addEventListener",w.data,b.ref_id+".player."+H])}}P.info("Options:",b);P.info("Config:",c.config);var s=this,r=c.config,y=c.ua,i=c.playerMode,m=c.api,
k=m.events,z=b.swfs.cover[i],v=b.swfs.player[i+(FlashDetect.major>=10&&FlashDetect.minor>=2&&!y.linux?"_sv":"")],E=[],D,X,V,K,I,za=(i===Xa?"mobi":"mooga")+"loop"+(r.embed.on_site?"_local":"");s.config=r;r.embed.api.on&&k.bind(db,l).bind(eb,n).bind(fb,o).bind(gb,g).bind(Ja,p).bind(Ta,B).bind(Ua,A).bind(ua,C).bind(va,C).bind(Ka,C).bind(ya,C).bind(gc,G);s.onProgress=function(w){k.fire(rb,w.toFloat().toFixed(3))};s.onPlayProgress=function(w){k.fire(rb,{seconds:w.seconds.toFloat().toFixed(3),percent:w.percent.toFloat().toFixed(3),
duration:w.duration.toFloat().toFixed(3)})};s.onLoading=function(w){k.fire(qb,{bytes:w.bytesLoaded.toInt(),percent:w.percent.toFloat().toFixed(3)})};s.onLoadProgress=function(w){k.fire(qb,{percent:w.percent.toFloat().toFixed(3),bytesLoaded:w.bytesLoaded.toInt(),bytesTotal:w.bytesTotal.toInt(),duration:w.duration.toFloat().toFixed(3)})};s.onPlay=function(){k.fire(pb)};s.onPause=function(){k.fire(ob)};s.onSeek=function(w){k.fire(bb,r.embed.api.version<2?w.toFloat().toFixed(3):{seconds:w.seconds.toFloat().toFixed(3),
percent:w.percent.toFloat().toFixed(3),duration:w.duration.toFloat().toFixed(3)})};s.onFinish=function(){k.fire(nb)};s.loverLoaded=function(){P.info("Lover loaded");$m.removeClass(a,Wa);K=document.getElementById("cover"+c.uniqueId);k.fire(Ma);f(K);setTimeout(function(){if($m.hasClass(K,U)){P.debug("Removing invisible from loaded timeout");s.loverThumbLoaded(true)}},2E3)};s.loverThumbLoaded=function(w){P.info("Lover thumbnail loaded?",w);if(!K){K=document.getElementById("cover"+c.uniqueId);k.fire(Ma)}$m.removeClass(K,
U);$m.addClass(D,T)};s.loverInitiated=function(){P.debug("Lover play button clicked");e()};s.moogaloopLoaded=function(){$m.removeClass(a,Wa);I=document.getElementById(b.ref_id);if(K){$m.remove(K);$m.removeClass(I,U);K=null}else k.fire(Ma);f(I);if(r.embed.api.on&&E.length>0)for(;E.length>0;){var w=E.shift(),H="api_"+w.shift();P.debug("Calling",H,"from queue",w);(new Function("this."+H+'("'+w.join('","')+'")')).call(I)}P.info("Welcome to Moogaloop!");setTimeout(function(){if($m.hasClass(I,U)){P.debug("Removing invisible from loaded timeout");
s.moogaloopThumbLoaded(true)}},2E3)};s.moogaloopThumbLoaded=function(w){P.info("Moog thumbnail loaded?",w);I||(I=document.getElementById(b.ref_id));$m.removeClass(I,U);$m.addClass(D,T)};s.destroy=function(){r.embed.api.on&&k.unbind(db,l).unbind(eb,n).unbind(fb,o).unbind(gb,g).unbind(Ja,p).unbind(Ta,B).unbind(Ua,A).unbind(ua,C).unbind(va,C).unbind(Ka,C)};for(D=a.getElementsByTagName("div")[0];D.nextSibling;)a.removeChild(D.nextSibling);!(r.embed.on_site||r.embed.autoplay||r.embed.api.on||y.opera||
i===Xa||r.security.privacy==="password")?j():e();a.parentNode.api_seekTo=function(w){o({data:w})}}});u.NoPlayer=MingClass.extend({init:function(a,b,c){function d(){var p=Math.round(a.clientWidth/2-e.clientWidth/2),B=Math.round(a.clientHeight/2-e.clientHeight/2);e.style.left=p+"px";e.style.top=B+"px"}function f(){g.get(cssPath+"/ming_overlays.css",function(p){o=p;h()})}function h(){var p,B=document.createElement("style");p=n.substring(n.indexOf("<style>"),n.indexOf("</style>")+8);o+=p.replace(/<(\/)?style>/g,
"");n.replace(p,"");if(c.ua.ie){B.type="text/css";B.styleSheet.cssText=o}else B.appendChild(document.createTextNode(o));document.getElementsByTagName("head")[0].appendChild(B);e.innerHTML=n;if(script=e.getElementsByTagName("script")[0])setTimeout(function(){(new Function(script.innerHTML)).call(c.config)},0);setTimeout(function(){j.show()},100)}var j=this,e=a.children[3],l=a.children[4],n,o,g=new XHR;htmlPath=b.html_path+"/ming_overlay_"+c.playerType+".php";cssPath=b.css_path;j.element=a;j.show=function(){var p=
e.getElementsByTagName("div")[0];$m.removeClass(e,T);$m.removeClass(l,T);d();setTimeout(function(){$m.addClass(p,Tb);$m.addClass(a,ha)},10)};for(window.addEventListener?window.addEventListener("resize",d,false):window.attachEvent("onresize",d);e.previousSibling;){if(e.previousSibling.className===Vb)break;a.removeChild(e.previousSibling)}$m.removeClass(a,Wa);(function(){g.get(htmlPath+"?"+(new Date).getTime(),function(p){n=p;f()})})()}});u.API=MingClass.extend({init:function(a){function b(s){if(!s||s==="")return false;try{return JSON.parse(s)}catch(r){var y=
{},i,m,k;s.split("&").forEach(function(z){i=z.split("=");m=decodeURIComponent(i[0]);k=decodeURIComponent(i[1]);if(m!=="id"){if(m==="params")m="value";if(k.contains(","))k=k.split(",")[0];y[m]=k}});return y}}function c(s){if($m.type(s)!=="string"){s=(s=s)||{};if(o)s.player_id=o;if(n>1&&window.JSON)s=JSON.stringify(s);else{var r="method="+encodeURIComponent(s.method||s.event)+"&params=",y=[];if(s.value)y.push(encodeURIComponent(s.value));else if($m.type(s.data)==="object")for(var i in s.data)y.push(encodeURIComponent(s.data[i]));
else s.data&&s.data!=="undefined"&&y.push(encodeURIComponent(s.data));s.player_id&&y.push(s.player_id);s=r+y.join(",")}}window.parent.postMessage(s,e);P.debug("<- Sent",s)}function d(s){var r=s.name,y=s.data;if(n<2){r=$m.findKey(r,p);switch(r){case "onSeek":case "onProgress":y.percent&&delete y.percent;case "onLoading":y.duration&&delete y.duration;break}}if(l[r]===true||s.name===Ma)c({event:r,data:y})}function f(s){var r=b(s.data);s=r.method;var y=r.value;if(!r||!s)return false;if(s.substr(0,4)===
"api_"){s=s.substr(4);s=C[s]||s;s=s.replace("()","")}r=s+"()";if(r===gc){l[y]=true;G.fire(gc,y);P.debug("-> Now listening for",y)}else if(r===oc){l[y]=false;G.fire(oc,y);P.debug("-> Stop listening for",y)}else if(B.contains(r)){P.debug("-> Received",s,y);switch(r){case Ua:y=y.toFloat();if(n<2)y/=100;break;case Ta:y=!!y.toInt();break;case Ja:if(y.search(/^[A-Fa-f\d]+$/g)===-1||y.length!==3&&y.length!==6){P.warn("Invalid color value");return}break}G.fire(r,y)}else if(A.contains(r)){P.debug("-> Received request for",
s,y);G.fire(r,y)}}function h(s){var r=false;switch(s.name){case pc:r=a.embed.color;break;case qc:r="http://"+a.request.vimeo_url+"/"+a.video.id;break;case rc:r=a.video.embed_code;break}j.sendBack(s.name,r)}if(!a.embed.api.on){this.events=new EventManager;return false}if(!window.postMessage||!window.parent.postMessage||window.location===window.parent.location){P.warn("Player API unavailable because this browser does not support postMessage or is not loaded in an iframe.");a.embed.api.on=0;this.events=
new EventManager;return false}var j=this,e=a.request.referrer,l={},n=a.embed.api.version,o=a.embed.api.player_id,g=[qb,rb,pb,ob,nb,bb,Ma,ad],p={onFinish:nb,onLoading:qb,onLoad:Ma,onProgress:rb,onPlay:pb,onPause:ob,onSeek:bb},B=[gc,oc,eb,db,Ja,fb,Ta,Ua,gb],A=[va,ua,Ka,pc,tb,qc,rc,Pa,Qa,ya],C={changeColor:Ja},G=new EventManager(g.concat(B,A));j.events=G;j.sendBack=function(s,r){s=s.replace("()","");if(n<2)s="api_"+s;c({method:s,value:r})};j.sendError=function(){P.error("API error")};g.forEach(function(s){G.bind(s,
d)});G.bind(pc,h).bind(qc,h).bind(rc,h);window.addEventListener?window.addEventListener("message",f,false):window.attachEvent("onmessage",f,false)}});u.Stats=MingClass.extend({init:function(a,b){var c=b.playerType.ucfirst()+
" "+b.playerMode.ucfirst(),d=window._gaq||[],f=null,h=b.playerType===yb?"local":"",j=(b.playerType===yb?"html5_"+b.playerMode:b.playerMode===Xa?"mobiloop":"moogaloop")+"_"+(a.embed.on_site?h:"embed");d.push(["pt._setAccount",a.analytics.ga_account]);this.clientLog=function(){var e=new XHR,l="http://"+a.request.player_url+"/log/client",n=["request_signature="+a.request.signature,"video="+ICanHas.video,"h264="+ICanHas.codecs.contains("h264"),"vp8="+ICanHas.codecs.contains("vp8"),"vp6="+ICanHas.codecs.contains("vp6"),
"flash="+FlashDetect.version,"touch="+ICanHas.touch,"screen_width="+screen.width,"screen_height="+screen.height].join("&");e.post(l,n,function(){})};this.googleLog=function(e,l){l=parseInt(Number(l),10);if(isNaN(l))l=undefined;P.log("google analytics:",c,e,a.video.id,l);d.push(["pt._trackEvent",c,e,a.video.id+"",l])};this.partialPlayLog=function(e,l,n){e=parseInt(e,10);if(e>f){var o=new XHR,g="http://"+a.request.player_url+"/log/partial";l="request_signature="+a.request.signature+"&seconds="+e+"&quality="+
l;P.log("vimeo stats:",e,"seconds played");n?o.post(g,l):o.post(g,l,function(){});f=e}};this.vimeoLog=function(e,l,n,o){var g=new XHR,p="http://"+a.request.player_url+"/log/"+e+"/"+a.video.id,B="?embed_location="+a.request.referrer+"&request_signature="+a.request.signature;B+="&type="+j;if(l)B+="&quality="+l;if(n)B+="&percent="+n;P.log("vimeo stats:",e,l,n);o?g.post(p,B):g.post(p,B,function(){})}}});if(!u.UI)u.UI={};u.UI.CanvasElement=MingClass.extend({init:function(a){if(!a)return false;this.element=a;this.origWidth=a.getAttribute("width");this.origHeight=a.getAttribute("height");this.width=this.origWidth*Cb;this.height=this.origHeight*Cb},draw:function(a,b,c,d,f){this.setData(a).setTranslation(b).setScale(c).setColor(d).setShadow(f);
this.refresh();return this},setData:function(a){this.data=a;return this},setTranslation:function(a){this.translation=a;return this},setScale:function(a){this.scale=a;return this},setColor:function(a){this.color=a;return this},setShadow:function(a){this.shadow=a;return this},refresh:function(){var a=this.data,b=this.shadow;try{if(!a||!this.element.getContext)return false}catch(c){return false}var d=this.scale||1,f=this.translation?$m.clone(this.translation):{x:0,y:0},h=this.color||"ffffff";this.element.attr({width:this.width,
height:this.height});d*=Cb;f.x*=Cb;f.y*=Cb;var j=this.element.getContext("2d"),e;j.clearRect(0,0,this.width,this.height);j.save();j.translate(f.x,f.y);j.scale(d,d);j.fillStyle=j.strokeStyle="#"+h;if(b){j.shadowOffsetX=j.shadowOffsetY=0;j.shadowBlur=10*Cb;j.shadowColor="rgba(0,0,0,0.5)"}d=0;for(f=a.length;d<f;d++)for(e in a[d])if(b=a[d][e])if($m.isArray(b))j[e].apply(j,b);else j[e]=b;else j[e].apply(j);j.restore();return this}});u.ContextMenu=MingClass.extend({init:function(a,b,c){function d(g){(g.target.hasAncestor?!g.target.hasAncestor(e):true)&&!f.isHidden&&f.hide()}var f=this,h=window,j=document,e=document.createElement("div"),l=[],n=!!c.win,o=!!c.mac;
f.element=e;f.items=l;f.isHidden=true;f.add=function(g,p){var B=new u.ContextMenu.Item(g,f);p||(p=e);p.appendChild(B.element);l.push(B);g.type=="info"&&p.addClass(Rc)};f.remove=function(g){l.slice(g,1)};f.show=function(){f.refresh();var g=event.pageX,p=event.pageY,B=j.width,A=j.height;if(g+e.clientWidth>B)g=B-e.clientWidth-5;if(p+e.clientHeight>A)p=A-e.clientHeight-5;e.attr("style","left: "+g+"px; top: "+p+"px;");e.removeClass(U);f.isHidden=false};f.hide=function(){e.addClass(U);f.isHidden=true};
h.addEventListener("contextmenu",d,false);h.addEventListener("contextmenu",function(g){if(!(n?g&&g.ctrlKey:g&&g.metaKey)&&g.target.hasAncestor(a)){f.show();if(g.returnValue)g.returnValue=false;else if(g.preventDefault)g.preventDefault();else return false}else f.isHidden||f.hide()},false);h.addEventListener("click",d,false);h.addEventListener("blur",d,false);h.addEventListener("mousedown",function(g){var p=g.target.hasAncestor?!g.target.hasAncestor(a):false,B=o?g&&g.metaKey:g&&g.ctrlKey;if(!f.isHidden||
g&&g.button>0&&!p&&!B){g.stopPropagation&&g.stopPropagation();g.preventDefault&&g.preventDefault();g.preventCapture&&g.preventCapture()}h.focus()},false);b&&f.setData(b).refresh();e.addClass(qd);f.hide();j.getElementsByTagName("body")[0].appendChild(e)},setData:function(a){this.data=a;return this},refresh:function(){function a(){var j=document.createElement("ul");d.appendChild(j);j.addClass("index"+h);h++;return j}function b(j,e){j.forEach(function(l){if($m.isArray(l)){f=f.children.length==0?f:a();
b(l,f)}else c.add(l,e)})}var c=this,d=c.element,f,h=0;c.element.innerHTML="";f=a();b(c.data,f);return this}});u.ContextMenu.Item=MingClass.extend({init:function(a,b){this.element=document.createElement("li");this.controller=b;a&&this.setData(a).refresh()},setData:function(a){this.data=a;return this},refresh:function(){function a(){j.addClass(Qc);j.addEventListener("click",function(){window.open(f.url)},false)}function b(){j.addClass(Bc);j.innerHTML="<span>"+j.innerHTML+"</span>";var e=$m.type(f.active)===
"function"?f.active.call():f.active;e&&j.addClass(Za);j.addEventListener("click",function(){(e=$m.type(f.active)==="function"?f.active.call():!f.active)?j.addClass(Za):j.removeClass(Za)},false)}function c(){j.addClass(Qc);j.addEventListener("click",function(){var e=Array.prototype.slice.call(arguments);h=="toggle"&&e.push(f.active);d.controller.hide();f.action.apply(this,e)},false)}var d=this,f=d.data,h=d.data.type,j=d.element;j.innerHTML=$m.type(f.text)==="function"?f.text.call():f.text;if(h=="toggle")b();
else if(h=="link")a();else h=="info"&&j.addClass(Rc);f.action&&c();return d}});