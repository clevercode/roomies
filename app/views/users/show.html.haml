- @main_class = 'profile'

#about.content
  - if @user.gravatar
    = image_tag "#{@user.gravatar}", :alt => "profile picture"
  - else
    = image_tag "profile_default.png", :alt => "profile picture"

  #about_header
    - if signed_in? && current_user == @user
      - if @user.name.blank?
        %h1
          = t(:hi_there, :scope => :profile)
          =  t(:new_roomie, :scope => :profile)
      -else
        %h1 #{t(:hi_there, :scope => :profile)}, #{@user.name}
    - else
      - if @user.name.blank?
        %h1= t(:new_roomie, :scope => :profile)
      -else
        %h1  #{@user.name}
    - if signed_in? && current_user == @user
      %p you have #{pluralize(@user.points, t(:point))}
    - else
      %p #{@user.name || "This roomie"} has #{pluralize(@user.points, t(:point))}
      %p= t(:next_level, :scope => :profile)
  #hud
    #roomie_bar
      %span
      %span
    %p#level amazing roomie
    - if @user.house
      %p#house
        #{@user.house.name} &mdash;
        - if signed_in? && current_user == @user
          = link_to 'change house name', edit_house_path(@user.house), :class => 'ajax'
          or
          = link_to 'add roomies', new_invitation_path, :class => 'ajax'
          |
          = link_to 'move out', homeless_url(:id => @user.id, :house_id => @user.house)
    - else
      %p#house
        - if signed_in? && current_user == @user
          = t :youre_homeless, :scope => :profile
          = link_to t(:build_house, :scope => :profile), new_house_path, :class => 'ajax'
          ?
        - else
          = t(:homeless_roomie, :scope => :profile)
    %p#tasks_expenses
      %span
      - if @tasks
        %span= pluralize(@tasks.count, t(:task, :scope => :profile))
      - else
        %span= t(:no_tasks, :scope => :profile)
      %span
      - if @tasks
        %span= pluralize(@expenses.count, t(:expense, :scope => :profile))
      - else
        %span= t(:no_expenses, :scope => :profile)
  %p.edit_profile= link_to t(:edit_profile, :scope => :profile), edit_user_path(@user), :class => 'ajax' if current_user
#achievements
  .header_bar
    %h1= t :achievements, :scope => :profile
    %p= link_to t(:more_achievements, :scope => :profile), achievements_url
  #badges.content
    #image
    #image
    #image
    #image.faded
    #image.faded
    #image.faded

- if current_user
  #progress
    .header_bar
      %h1= t(:progress, :scope => :profile)
    .content
      %table
        %tr
          %td awesomeness
          %td.progress_bar
            .bars
              .bar
              .bar_bg
          %td.percentage 77%
        %tr
          %td reliability
          %td.progress_bar
            .bars
              .bar
              .bar_bg
          %td.percentage 77%
        %tr
          %td helpfullness
          %td.progress_bar
            .bars
              .bar
              .bar_bg
          %td.percentage 77%
        %tr
          %td cooking master
          %td.progress_bar
            .bars
              .bar
              .bar_bg
          %td.percentage 77%

  #batte
    .header_bar
      %h1= t :roomie_battle, :scope => :profile 
    - if roomies_list
      .content
        %table
          %tr
            %th= t :name, :scope => :profile
            %th= t :progress, :scope => :profile             
            %th.level= t :next_level, :scope => :profile 
          - roomies_list.all.map do |roomie|
            %tr
              %td
                - if (roomie == current_user)
                  %strong #{t(:you, :scope => :profile)}
                - elsif roomie.name
                  = link_to roomie.name, roomie
                - else
                  = t :no_name_roomie, :scope => :profile 
              %td.progress_bar
                .bars
                  .bar
                  .bar_bg
              %td.level 4
    - else
      .content
        %p You don't have roomies to battle with yet. Quick! Remedy this at once.
